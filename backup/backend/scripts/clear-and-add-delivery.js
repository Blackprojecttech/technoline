const mongoose = require('mongoose');
require('dotenv').config();

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB
mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/technoline-store', {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

// –°—Ö–µ–º–∞ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
const deliveryMethodSchema = new mongoose.Schema({
  name: { type: String, required: true },
  description: { type: String, required: true },
  type: { 
    type: String, 
    required: true, 
    enum: ['pickup', 'courier', 'cdek', 'urgent'] 
  },
  price: { type: Number, default: 0 },
  isActive: { type: Boolean, default: true },
  order: { type: Number, default: 0 },
  conditions: { type: String },
  workingHours: { type: String },
  address: { type: String },
  restrictions: { type: String }
}, {
  timestamps: true
});

const DeliveryMethod = mongoose.model('DeliveryMethod', deliveryMethodSchema);

const deliveryMethods = [
  {
    name: '–°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞',
    description: '–ó–∞–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏–∑ –Ω–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ!',
    type: 'pickup',
    price: 0,
    isActive: true,
    order: 1,
    conditions: '–û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –∏–ª–∏ –∫–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏',
    workingHours: '–ü–Ω-–ü—Ç 9:00-18:00, –°–± 10:00-16:00',
    address: '–ù–∞—à –º–∞–≥–∞–∑–∏–Ω',
    restrictions: '–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑'
  },
  {
    name: '–°–∞–º–æ–≤—ã–≤–æ–∑ –Ω–∞ –ú–∏—Ç–∏–Ω—Å–∫–æ–º –†–∞–¥–∏–æ—Ä—ã–Ω–∫–µ',
    description: '–°–∞–º–æ–≤—ã–≤–æ–∑ –º–µ—Ç—Ä–æ –í–æ–ª–æ–∫–æ–ª–∞–º—Å–∫–∞—è, –ú–æ—Å–∫–≤–∞, –ü—è—Ç–Ω–∏—Ü–∫–æ–µ —à–æ—Å—Å–µ, 18, 1 —ç—Ç–∞–∂, 73 –ø–∞–≤–∏–ª—å–æ–Ω, 3-–∏–π –≤—Ö–æ–¥, –æ—Ç –ø—è—Ç–Ω–∏—Ü–∫–æ–≥–æ —à–æ—Å—Å–µ –ø—Ä—è–º–æ –¥–æ –∫–æ–Ω—Ü–∞, —É–≥–ª–æ–≤–æ–π –ø–∞–≤–∏–ª—å–æ–Ω —Å –∑–µ–ª–µ–Ω–æ–π –≤—ã–≤–µ—Å–∫–æ–π, —Å–ª–µ–≤–∞ –æ—Ç –º–∏–∫—Å –±–∞—Ä–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤–∞–º –Ω—É–∂–µ–Ω –∏–º–µ–Ω–Ω–æ 73 –ø–∞–≤–∏–ª—å–æ–Ω, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ —Ä–∞–¥–∏–æ—Ä—ã–Ω–∫–µ –º–Ω–æ–≥–æ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤ —Å –ø–æ—Ö–æ–∂–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏.',
    type: 'pickup',
    price: 0,
    isActive: true,
    order: 2,
    conditions: '–û–ø–ª–∞—Ç–∞ –ö–∞—Ä—Ç–æ–π –ø—Ä–∏ —Å–∞–º–æ–≤—ã–≤–æ–∑–µ [–ü–í–ó, –æ–Ω–ª–∞–π–Ω]. –ö –æ–ø–ª–∞—Ç–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –∏ –¥–µ–±–µ—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –ú–ò–†, VISA –∏–ª–∏ Mastercard; ‚Äã–∑–∞–∫–∞–∑ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ –≤ –ø—É–Ω–∫—Ç–µ –≤—ã–¥–∞—á–∏ –Ω–∞ –ü—è—Ç–Ω–∏—Ü–∫–æ–º —à–æ—Å—Å–µ, 18. —á–µ—Ä–µ–∑ –ø—É–Ω–∫—Ç —Å–¥—ç–∫–∞, –ª–∏–±–æ Boxberry, –ª–∏–±–æ —Ç–µ—Ä–º–∏–Ω–∞–ª; –°–ø–æ—Å–æ–± –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è —Å–∞–º–æ–≤—ã–≤–æ–∑–∞ –Ω–∞ –ú–∏—Ç–∏–Ω—Å–∫–æ–º –†–∞–¥–∏–æ—Ä—ã–Ω–∫–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏ —Å–µ–±–µ –∏–º–µ—Ç—å –ø–∞—Å–ø–æ—Ä—Ç.',
    workingHours: '–†–∞–±–æ—Ç–∞–µ–º —Å 10:00 –¥–æ 19:00 –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö',
    address: '–¢–¶ –ú–∏—Ç–∏–Ω—Å–∫–∏–π –†–∞–¥–∏–æ—Ä—ã–Ω–æ–∫. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–µ—Ö–∞—Ç—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏ –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—É—é –≤–∞–º —Ç–µ—Ö–Ω–∏–∫—É.',
    restrictions: '–°—Ç–æ–∏–º–æ—Å—Ç—å —Å–∞–º–æ–≤—ã–≤–æ–∑–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ –∫–∞—Ä—Ç–æ–π —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞.'
  },
  {
    name: '–ö—É—Ä—å–µ—Ä–æ–º –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–ö–ê–î',
    description: '–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –ú–æ—Å–∫–≤–µ: –î–æ—Å—Ç–∞–≤–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∫—É—Ä—å–µ—Ä—Å–∫–æ–π —Å–ª—É–∂–±–æ–π –Ω–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–ö–ê–î (–ö—Ä–æ–º–µ –í–î–ù–•, –¶–∞—Ä–∏—Ü—ã–Ω–æ, –õ—é–±–ª–∏–Ω–æ, –ë–∏—Ä—é–ª–µ–≤–æ, –û—Ä–µ—Ö–æ–≤–æ-–ë–æ—Ä–∏—Å–æ–≤–æ, –ß–µ—Ä—Ç–∞–Ω–æ–≤–æ –∏ –Ø—Å–µ–Ω–µ–≤–æ - –î–ª—è —ç—Ç–∏—Ö —Ä–∞–π–æ–Ω–æ–≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å 800-900 –†—É–±–ª–µ–π) –≤ —ç—Ç–æ—Ç –∂–µ( –î–ª—è –∑–∞–∫–∞–∑–æ–≤ –¥–æ 11:00), –ª–∏–±–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å –ø–æ—Å–ª–µ –∑–∞–∫–∞–∑–∞ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É.',
    type: 'courier',
    price: 300,
    isActive: true,
    order: 3,
    conditions: '–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Å 13 –¥–æ 17, –ª–∏–±–æ —Å 17 –¥–æ 21. –ü–æ –≤—ã—Ö–æ–¥–Ω—ã–º –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ–º!',
    workingHours: '–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: 13:00-17:00 –∏–ª–∏ 17:00-21:00',
    address: '–í –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–ö–ê–î',
    restrictions: '–¶–µ–Ω–∞ —É–∫–∞–∑–∞–Ω–∞ –¥–ª—è –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ (—Ç–µ–ª–µ—Ñ–æ–Ω, —á–∞—Å—ã, –ø–ª–∞–Ω—à–µ—Ç –∏ —Ç.–¥.) –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ'
  },
  {
    name: '–î–æ—Å—Ç–∞–≤–∫–∞ –∫—É—Ä—å–µ—Ä–æ–º –∑–∞ –ú–ö–ê–î',
    description: '–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –ú–ö–ê–î –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ —ç—Ç–æ—Ç –∂–µ, –ª–∏–±–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å –ø–æ—Å–ª–µ –∑–∞–∫–∞–∑–∞. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.',
    type: 'courier',
    price: 1300,
    isActive: true,
    order: 4,
    conditions: '–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Å 13 –¥–æ 17, –ª–∏–±–æ —Å 17 –¥–æ 21. –ü–æ –≤—ã—Ö–æ–¥–Ω—ã–º –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ–º!',
    workingHours: '–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: 13:00-17:00 –∏–ª–∏ 17:00-21:00',
    address: '–ó–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ú–ö–ê–î',
    restrictions: '–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –û–¢ 1300 –†—É–±–ª–µ–π. –ü–æ–¥—Ä–æ–±–Ω–µ–µ'
  },
  {
    name: '–°—Ä–æ—á–Ω–∞—è –î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –ú–æ—Å–∫–≤–µ',
    description: '–°—Ä–æ—á–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –ú–æ—Å–∫–≤–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å–æ–≤',
    type: 'urgent',
    price: 800,
    isActive: true,
    order: 5,
    conditions: '–°—Ç–æ–∏–º–æ—Å—Ç—å —É—Ç–æ—á–Ω—è—Ç—å —É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞',
    workingHours: '–ü–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏',
    address: '–ü–æ –ú–æ—Å–∫–≤–µ',
    restrictions: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∞'
  },
  {
    name: '–ö—É—Ä—å–µ—Ä—Å–∫–∞—è —Å–ª—É–∂–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –°–î–≠–ö',
    description: '–î–æ—Å—Ç–∞–≤–∫–∞ –∫—É—Ä—å–µ—Ä—Å–∫–æ–π —Å–ª—É–∂–±–æ–π "–°–î–≠–ö" –≤ –ª—é–±—ã–µ –≥–æ—Ä–æ–¥–∞ –†–æ—Å—Å–∏–∏. –î–æ—Å—Ç–∞–≤–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ –ø–æ–ª–Ω–æ–π –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–µ, —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ, –≤ —ç—Ç—É —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Ö–æ–¥–∏—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞, —É–ø–∞–∫–æ–≤–∫–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –¥–æ –≤–∞—à–µ–≥–æ –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏ –°–î–≠–ö.',
    type: 'cdek',
    price: 500,
    isActive: true,
    order: 6,
    conditions: '–ß—Ç–æ–±—ã —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å. –ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ - –ú–∏—Ç–∏–Ω–æ.',
    workingHours: '–ü–æ –≥—Ä–∞—Ñ–∏–∫—É —Ä–∞–±–æ—Ç—ã –°–î–≠–ö',
    address: '–ü–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏',
    restrictions: '–¶–µ–Ω–∞ —É–∫–∞–∑–∞–Ω–∞ –¥–ª—è –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ (—Ç–µ–ª–µ—Ñ–æ–Ω, —á–∞—Å—ã, –ø–ª–∞–Ω—à–µ—Ç, –Ω–æ—É—Ç–±—É–∫ –∏ —Ç.–¥.) –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ'
  }
];

async function clearAndAddDeliveryMethods() {
  try {
    console.log('üóëÔ∏è –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è—é –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç–∞–≤–∫–∏...');
    
    // –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ–º –≤—Å–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç–∞–≤–∫–∏
    const deleteResult = await DeliveryMethod.deleteMany({});
    console.log(`‚úÖ –£–¥–∞–ª–µ–Ω–æ ${deleteResult.deletedCount} —Å—Ç–∞—Ä—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏`);
    
    console.log('\n‚ûï –î–æ–±–∞–≤–ª—è—é –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç–∞–≤–∫–∏...');
    
    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç–∞–≤–∫–∏
    const createdMethods = await DeliveryMethod.insertMany(deliveryMethods);
    
    console.log('‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ', createdMethods.length, '–º–µ—Ç–æ–¥–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏:');
    createdMethods.forEach((method, index) => {
      console.log(`${index + 1}. ${method.name} - ${method.price}‚ÇΩ`);
    });

    console.log('\n‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç–∞–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!');
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    const allMethods = await DeliveryMethod.find({});
    console.log(`\nüìä –í—Å–µ–≥–æ –º–µ—Ç–æ–¥–æ–≤ –≤ –±–∞–∑–µ: ${allMethods.length}`);
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–µ—Ç–æ–¥–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏:', error);
  } finally {
    mongoose.connection.close();
  }
}

clearAndAddDeliveryMethods(); 